<!doctype html>
<html ng-app="app" lang="en">
	<head>
		<meta charset="UTF-8">
		<title>Angular App</title>
		<link rel="icon" type="image/x-icon" href="/img/favicon.ico">
		<meta name="viewport" content="width=device-width, initial-scale=1">

		<base href="/">
	</head>
	<body>
		<!--List of elements-->
		<script type="text/ng-template" id="./list.html">
		    <ul dnd-list="list">
		        <li ng-repeat="item in list"
		            dnd-draggable="item"
		            dnd-effect-allowed="all"
		            dnd-moved="list.splice($index, 1)"
		            dnd-selected="models.selected = item"
		            ng-class="{selected: models.selected === item}"
		            ng-include="'./item.html'">
		        </li>
		    </ul>
		</script>

		<!--Generic Item-->
		<script type="text/ng-template" id="./item.html">
		    <div class="container-element container-fluid">
		    	<div class="row">
  					<div class="col-xs-3">
				        <md-input-container class="md-block">
							<label>Property name</label>
							<input ng-model="item.$name" required>
						</md-input-container>
					</div>
					<div class="col-xs-1">
						<md-input-container class="md-block md-valign">
							<md-switch class="md-primary" name="required" ng-model="item.$required">
								<label>Required</label>
					        </md-switch>
						</md-input-container>
					</div>
					<div class="col-xs-3">
						<md-input-container class="md-block">
					    	<label class="md-input-has-value">Dependencies</label>
				    		<md-select ng-model="item.$dependencies" multiple ng-disabled="list.length<2">
								<md-option ng-value="sibling.$name" ng-repeat="sibling in list|exclude:item">
									{{sibling.$name}}
								</md-option>
							</md-select>
						</md-input-container>
					</div>
					<div class="col-xs-2 col-xs-offset-2">
						<md-input-container>
	          				<label>Type</label>
							<md-select ng-model="item.type">
								<md-option value="object">
									Object
								</md-option>
								<md-option value="string" ng-disabled="item.$object.$children.length>0">
									String
								</md-option>
								<md-option value="integer" ng-disabled="item.$object.$children.length>0">
									Integer
								</md-option>
								<md-option value="number" ng-disabled="item.$object.$children.length>0">
									Number
								</md-option>
								<md-option value="boolean" ng-disabled="item.$object.$children.length>0">
									Boolean
								</md-option>
								<md-option value="null" ng-disabled="item.$object.$children.length>0">
									Null
								</md-option>
							</md-select>
						</md-input-container>
					</div>
					<div class="col-xs-1">
						<md-button class="md-fab md-mini md-warn pull-right" aria-label="Remove Item" ng-click="sdCtrl.removeItem(item, list)">
							<i class="glyphicon glyphicon-trash"></i>
						</md-button>
					</div>
				</div>
				<div class="row">
					<div class="col-xs-1">
						<md-input-container class="md-block md-valign">
							<md-switch class="md-primary" name="listOf" ng-model="item.$listOf">
								<label>List/Array</label>
					        </md-switch>
						</md-input-container>
					</div>
					<div class="col-xs-1" ng-show="item.$listOf">
						<md-input-container class="md-block" ng-init="(item.$minOccurrences>=0)?null:(item.$minOccurrences=0)">
					        <label>Min Occurrence</label>
					        <input required type="number" step="1" name="$minOccurrencess" ng-model="item.$minOccurrences" min="0" ng-max="item.$maxOccurrences||999"/>
							<div ng-messages="item.$minOccurrences.$error" multiple role="alert">
								<div ng-message="min">
									The minimum possible should be zero
								</div>
								<div ng-message="max">
									{{item.$minOccurrences.$viewValue}} is greater than {{item.$maxOccurrences}} (max occurence).
								</div>
							</div>
					    </md-input-container>
					</div>
					<div class="col-xs-1" ng-show="item.$listOf">
					    <md-input-container class="md-block">
					        <label>Max Occurrence</label>
					        <input placeholder="&infin;" type="number" step="1" name="$maxOccurrencess" ng-model="item.$maxOccurrences" max="999" ng-min="item.$minOccurrences||1"/>
							<div ng-messages="item.$maxOccurrences.$error" multiple role="alert">
								<div ng-message="max">
									The maximum possible should be less than 999
								</div>
								<div ng-message="min">
									{{item.$maxOccurrences.$viewValue}} is lower than {{item.$minOccurrences}} (min occurence).
								</div>
							</div>
					    </md-input-container>
					</div>
					<div class="col-xs-1" ng-show="item.$listOf">
						<md-input-container class="md-block md-valign">
							<md-switch class="md-primary" name="uniqueItems" ng-model="item.$uniqueItems">
								<label>Unique Items</label>
					        </md-switch>
						</md-input-container>
					</div>
				</div>
		    </div>
	        <div ng-include="'./'+item.type+'.html'" class="container-element container-fluid"></div>
	        <div class="clearfix"></div>
		</script>

		<!-- Object -->
		<script type="text/ng-template" id="./object.html">
			<div class="row">
				<div class="col-xs-2">
					<md-input-container class="md-block md-valign">
				        <label>Additional properties</label>
			    		<md-select ng-model="item.$object.additionalProperties">
							<md-option ng-value="">
								Allowed
							</md-option>
							<md-option ng-value="false">
								Not allowed
							</md-option>
							<md-option ng-value="{type:'string'}">
								String
							</md-option>
							<md-option ng-value="{type:'integer'}">
								Integer
							</md-option>
							<md-option ng-value="{type:'number'}">
								Number
							</md-option>
							<md-option ng-value="{type:'boolean'}">
								Boolean
							</md-option>
						</md-select>
					</md-input-container>
				</div>
				<div class="col-xs-1 col-xs-offset-9">
					<md-button class="md-fab md-mini md-primary pull-right" aria-label="Add Item" ng-click="sdCtrl.addItem(item.$object.$children)">
						<i class="glyphicon glyphicon-plus"></i>
					</md-button>
				</div>
			</div>
		    <div class="dropzone" ng-repeat="list in [item.$object.$children]" ng-include="'./list.html'"></div>
		</script>

		<!-- Integer -->
		<script type="text/ng-template" id="./integer.html">
		    <md-grid-list md-cols-xs="2" md-cols-sm="4" md-cols-md="5" md-cols-gt-md="7" md-row-height="3:1" md-gutter="12px" md-gutter-gt-sm="8px" >
			    <md-grid-tile md-colspan-xs="3">
			    	<md-input-container class="md-block">
				        <label>Multiple of</label>
				        <input placeholder="none" type="number" step="1" name="multipleOf" ng-model="item.$integer.multipleOf"/>
				    </md-input-container>
			    </md-grid-tile>
			    <md-grid-tile md-colspan-xs="2">
			    	<md-input-container class="md-block md-valign">
				        <label>Value must be</label>
			    		<md-select ng-model="item.$integer.exclusiveMinimum">
							<md-option ng-value="true">
								&gt;
							</md-option>
							<md-option ng-value="false" selected>
								&ge;
							</md-option>
						</md-select>
					</md-input-container>
				</md-grid-tile>
			    <md-grid-tile md-colspan-xs="3">
					<md-input-container class="md-block">
				        <label>Min value</label>
				        <input placeholder="- &infin;" type="number" step="1" name="minValue" ng-model="item.$integer.minimum" ng-max="item.$integer.maximum"/>
						<div ng-messages="item.minimum.$error" role="alert">
							<div ng-message="max">
								{{item.$integer.minimum.$viewValue}} is greater than {{item.$integer.maximum}} (max value).
							</div>
						</div>
				    </md-input-container>
				</md-grid-tile>
			    <md-grid-tile md-colspan-xs="2">
			    	<md-input-container class="md-block md-valign">
				        <label>Value must be</label>
			    		<md-select ng-model="item.$integer.exclusiveMaximum">
							<md-option ng-value="true">
								&lt;
							</md-option>
							<md-option ng-value="">
								&le;
							</md-option>
						</md-select>
					</md-input-container>
				</md-grid-tile>
				<md-grid-tile md-colspan-xs="3">
				    <md-input-container class="md-block">
				        <label>Max value</label>
				        <input placeholder="&infin;" type="number" step="1" name="maxValue" ng-model="item.$integer.maximum" ng-min="item.$integer.minimum"/>
						<div ng-messages="item.maximum.$error" role="alert">
							<div ng-message="min">
								{{item.$integer.maximum.$viewValue}} is lower than {{item.$integer.minimum}} (min value).
							</div>
						</div>
				    </md-input-container>
				</md-grid-tile>
			</md-grid-list>	
		</script>

		<!-- Numeric -->
		<script type="text/ng-template" id="./number.html">
		    <md-grid-list md-cols-xs="2" md-cols-sm="4" md-cols-md="5" md-cols-gt-md="7" md-row-height="3:1" md-gutter="12px" md-gutter-gt-sm="8px" >
			    <md-grid-tile md-colspan-xs="3">
			    	<md-input-container class="md-block">
				        <label>Multiple of</label>
				        <input placeholder="none" type="number" step="0.1" name="multipleOf" ng-model="item.$number.multipleOf"/>
				    </md-input-container>
			    </md-grid-tile>
			    <md-grid-tile md-colspan-xs="2">
			    	<md-input-container class="md-block md-valign">
				        <label>Value must be</label>
			    		<md-select ng-model="item.$number.exclusiveMinimum">
							<md-option ng-value="true">
								&gt;
							</md-option>
							<md-option ng-value="false" selected>
								&ge;
							</md-option>
						</md-select>
					</md-input-container>
				</md-grid-tile>
			    <md-grid-tile md-colspan-xs="3">
					<md-input-container class="md-block">
				        <label>Min value</label>
				        <input placeholder="- &infin;" type="number" step="0.1" name="minValue" ng-model="item.$number.minimum" ng-max="item.$number.maximum"/>
						<div ng-messages="item.$number.minimum.$error" role="alert">
							<div ng-message="max">
								{{item.$number.minimum.$viewValue}} is greater than {{item.$number.maximum}} (max value).
							</div>
						</div>
				    </md-input-container>
				</md-grid-tile>
			    <md-grid-tile md-colspan-xs="2">
			    	<md-input-container class="md-block md-valign">
				        <label>Value must be</label>
			    		<md-select ng-model="item.$number.exclusiveMaximum">
							<md-option ng-value="true">
								&lt;
							</md-option>
							<md-option ng-value="">
								&le;
							</md-option>
						</md-select>
					</md-input-container>
				</md-grid-tile>
				<md-grid-tile md-colspan-xs="3">
				    <md-input-container class="md-block">
				        <label>Max value</label>
				        <input placeholder="&infin;" type="number" step="0.1" name="maxValue" ng-model="item.$number.maximum" ng-min="item.$number.minimum"/>
						<div ng-messages="item.$number.maximum.$error" role="alert">
							<div ng-message="min">
								{{item.$number.maximum.$viewValue}} is lower than {{item.$number.minimum}} (min value).
							</div>
						</div>
				    </md-input-container>
				</md-grid-tile>
			</md-grid-list>	
		</script>

		<!-- String -->
		<script type="text/ng-template" id="./string.html">
			<div class="row">
				<div class="col-xs-1">
					<md-input-container class="md-block">
				        <label>Min length</label>
				        <input placeholder="0" type="number" step="1" name="minLength" ng-model="item.$string.minLength" ng-min="0" ng-max="item.$string.maxLength"/>
						<div ng-messages="item.$string.minimum.$error" multiple role="alert">
							<div ng-message="min">
								Min Length must be greater than or equal to 0.
							</div>
							<div ng-message="max">
								{{item.$string.minLength.$viewValue}} is greater than {{item.$string.maxLength}} (max value).
							</div>
						</div>
				    </md-input-container>
				</div>
				<div class="col-xs-1">
				    <md-input-container class="md-block">
				        <label>Max length</label>
				        <input placeholder="&infin;" type="number" step="1" name="maxLength" ng-model="item.$string.maxLength" ng-min="item.$string.minLength"/>
						<div ng-messages="item.$string.minimum.$error" multiple role="alert">
							<div ng-message="min">
								{{item.$string.maxLength.$viewValue}} is lower than {{item.$string.minLength}} (min value).
							</div>
						</div>
				    </md-input-container>
				</div>
				<div class="col-xs-3">
			        <md-input-container class="md-block">
						<label>Regular expression pattern</label>
						<input ng-model="item.$string.pattern">
					</md-input-container>
				</div>
				<div class="col-xs-2">
			    	<md-input-container class="md-block">
				        <label>Format</label>
			    		<md-select ng-model="item.$string.format" placeholder="Generic">
			    			<md-option ng-value="">
								Generic
							</md-option>
							<md-option ng-value="'date-time'">
								Date/Time
							</md-option>
							<md-option ng-value="'email'">
								Email
							</md-option>
							<md-option ng-value="'hostname'">
								Host name
							</md-option>
							<md-option ng-value="'ipv4'">
								ipv4
							</md-option>
							<md-option ng-value="'ipv6'">
								ipv6
							</md-option>
							<md-option ng-value="'uri'">
								URI
							</md-option>
						</md-select>
					</md-input-container>
				</div>
				<div class="col-xs-5">
					<md-chips ng-model="item.$string.$domain" md-enable-chip-edit="true" secondary-placeholder="+ Allowed value" placeholder="Type a domain value"></md-chips>
				</div>
			</div>	
		</script>

		<!-- Boolean -->
		<script type="text/ng-template" id="./boolean.html">
		</script>
		<!-- Null -->
		<script type="text/ng-template" id="./null.html">
		</script>

	  	<app></app>
	</body>
</html>