<main ng-controller="sdCtrl as sdCtrl" ng-cloak>
	<md-content md-theme="docs-dark" layout-gt-sm="row" layout-padding>
	    <div>
			<md-input-container>
				<label>End Point</label>
				<input ng-model="service.endPoint" required>
			</md-input-container>
	    </div>
	    <md-fab-speed-dial ng-hide="demo.hidden" md-direction="left" md-open="demo.isOpen" class="md-scale md-fab-top-right" ng-class="{ 'md-hover-full': demo.hover }" ng-mouseenter="demo.isOpen=true" ng-mouseleave="demo.isOpen=false">
			<md-fab-trigger>
				<md-button aria-label="menu" class="md-fab md-warn">
					<md-tooltip md-direction="top" md-visible="tooltipVisible">Menu</md-tooltip>
					<i class="glyphicon glyphicon-file"></i>
				</md-button>
			</md-fab-trigger>

			<md-fab-actions>
				<div>
					<md-button aria-label="download" class="md-fab md-raised md-mini" ng-click="sdCtrl.exportJson(service, service.endPoint+'.mksd.json')">
						<md-tooltip md-direction="down" md-visible="tooltipVisible" md-autohide="false">
							Download
						</md-tooltip>
						<i class="glyphicon glyphicon-cloud-download"></i>
					</md-button>
				</div>
			</md-fab-actions>
			<md-fab-actions>
				<div>
					<md-button aria-label="upload" class="md-fab md-raised md-mini" ngf-select="sdCtrl.importJson($file, service)" ngf-pattern="'application/json'">
						<md-tooltip md-direction="up" md-visible="tooltipVisible" md-autohide="false">
							Upload
						</md-tooltip>
						<i class="glyphicon glyphicon-cloud-upload"></i>
					</md-button>
				</div>
			</md-fab-actions>
	    </md-fab-speed-dial>
	</md-content>
	<md-content class="md-padding ng-cloak">
		<md-tabs md-border-bottom md-autoselect md-dynamic-height>
			<md-tab ng-repeat="(verb,schemas) in sdCtrl.verbs" ng-attr-label="{{verb}}">
				<div>
					<md-switch ng-model="service.verbs[verb].enabled" aria-label="Switch {{verb}}">
						Enable <b>{{verb|uppercase}}</b> for <i>{{service.endPoint}}</i>
					</md-switch>
				</div>
				<div layout="row" ng-if="service.verbs[verb].enabled">
					<div flex ng-repeat="schemaName in schemas">
						<md-toolbar md-scroll-shrink>
							<div class="md-toolbar-tools capitalize">
								{{schemaName}}
								<span flex></span>
								<md-button class="md-icon-button" aria-label="">
						        	<md-icon>json</md-icon>
						        </md-button>
								<md-button class="md-icon-button" aria-label="" ng-click="sdCtrl.exportJson(service.verbs[verb][schemaName]|mkss2jsonschema:service.endPoint:verb:schemaName, service.endPoint+'.'+verb+'.'+schemaName+'.schema.json')">
						        	<md-icon>jss</md-icon>
						        </md-button>
						        <md-button class="md-fab md-mini md-primary" aria-label="Add Item" ng-click="sdCtrl.addItem(service.verbs[verb][schemaName])">
									<i class="glyphicon glyphicon-log-in"></i>
								</md-button>
						    </div>
						</md-toolbar>
						<div ng-init="service.verbs[verb][schemaName]=service.verbs[verb][schemaName]||[]" class="dropzone" ng-repeat="list in [service.verbs[verb][schemaName]]" ng-include="'./list.html'">
						</div>
						<pre>{{service.verbs[verb][schemaName]|mkss2jsonschema:service.endPoint:verb:schemaName|json:4}}</pre>
					</div>
				</div>
			</md-tab>
		</md-tabs>
    </md-content>
</main>
<footer>
</footer>